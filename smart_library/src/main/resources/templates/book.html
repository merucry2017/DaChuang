<!DOCTYPE html >
<html lang="en" xmlns:th="http://www.thymeleaf.org">

	<head>

		<meta charset="utf-8" />
		<title>书籍</title>
		<!--导入核心文件-->
		<script src="../static/bootstrap3/js/holder.js" th:src="@{/bootstrap3/js/holder.js}"></script>
		<link href="../static/bootstrap3/css/bootstrap.css" rel="stylesheet" th:href="@{/bootstrap3/css/bootstrap.css}">
		<script src="../static/bootstrap3/jquery-1.8.3.min.js" th:src="@{/bootstrap3/jquery-1.8.3.min.js}"></script>
		<script src="../static/bootstrap3/js/bootstrap.js" th:src="@{/bootstrap3/js/bootstrap.js}"></script>
		<!-- 字体图标 -->
		<link rel="stylesheet" href="../static/bootstrap3/font-awesome-4.7.0/css/font-awesome.css" th:href="@{/bootstrap3/font-awesome-4.7.0/css/font-awesome.css}"/>
		<link rel="stylesheet" type="text/css" href="../static/css/layout.css" th:href="@{/css/layout.css}"/>
		<link rel="stylesheet" type="text/css" href="../static/css/webindex.css" th:href="@{/css/webindex.css}"/>
		<link rel="stylesheet" type="text/css" href="../static/css/footer.css" th:href="@{/css/footer.css}"/>
		<link rel="stylesheet" type="text/css" href="../static/css/top.css" th:href="@{/css/top.css}"/>
		<link rel="stylesheet" type="text/css" href="../static/css/imgmove.css" th:href="@{/css/imgmove.css}"/>
		<script src="../static/js/product.js" type="text/javascript" th:src="@{/js/product.js}"></script>
		<script src="../static/js/imgmove.js" type="text/javascript" th:src="@{/js/imgmove.js}"></script>
	</head>

	<body>
		<!--头部-->
		<header class="header">
			<!--学子商城logo-->
			<div class="col-md-3">
				<a href="index.html">
					<img src="../static/asserts/img/favicons/logo.png" width="240" height="150" th:src="@{/asserts/img/favicons/logo.png}"/>
				</a>
			</div>
			<!--快捷选项-->
			<div class="col-md-9 top-item">

				<ul class="list-inline" style="float: right;">

					<li>
						<a href="favorites.html"><span class="fa fa-heart"></span>&nbsp;收藏</a>
					</li>
					<li class="li-split">|</li>

					<li>
						<!--下列列表按钮 ：管理-->
						<div class="btn-group">
							<button type="button" class="btn btn-link dropdown-toggle" data-toggle="dropdown">
							<span id="top-dropdown-btn"><span class="fa fa-gears"></span>&nbsp;管理
								<span class="caret"></span></span>
						</button>
							<ul class="dropdown-menu top-dropdown-ul" role="menu">
								<li>
									<a href="password.html">修改密码</a>
								</li>
								<li>
									<a href="userdata.html">个人资料</a>
								</li>
								<li>
									<a href="upload.html">上传头像</a>
								</li>
							</ul>
						</div>
					</li>
					<li class="li-split">|</li>
					<li>
						<a href="login.html"><span class="fa fa-user"></span>&nbsp;登录</a>
					</li>

				</ul>

			</div>

		</header>
		<!--头部结束-->
		<!--导航 -->
		<!--分割导航和顶部-->
		<div class="clearfix"></div>
		<hr />
		<div class="col-md-12 top-nav">
			<div class="col-md-6">
				<ul class="nav nav-pills">
					<li>
						<a href="#"></a>
					</li>
					<li class="active">
						<a href="index.html"><span class="fa fa-home"></span></a>
					</li>
					<li>
						<a href="#">习题</a>
					</li>
					<li>
						<a href="./myquestion.html" th:href="@{myquestion.html}">我的错题</a>
					</li>
					<li>
						<a href="#">我的学习分析</a>
					</li>

				</ul>

			</div>
			<div class="col-md-6">

				<form action="search.html" class="form-inline" role="form" style="float: right;">
					<div class="form-group">
						<input type="text" class="form-control" id="search" name="search" placeholder="请输入关键词进行搜索">
					</div>

					<button type="button" class="btn btn-default btn-sm" id="btn-search">
					<span class="fa fa-search"></span>
				</button>
				</form>

			</div>
		</div>
		<!--导航结束-->

		<!--书籍信息展示开始-->
		<div class="col-md-offset-1 col-md-10">
			<div class="col-md-6" id="books-images">

				<div data="1" class="img-big move-img col-md-12">
					<img id="books-image-1-big" src="" style="width: 400px; height: 500px; float: right; border: none;" />
				</div>

			</div>

			<div class="col-md-6">
				<h3 id="books-title" class="col-md-12 title-row-1">找不到信息</h3>
				
				<div class="col-md-12 price-bar">
					<small>作者：</small> <label id="books-writer"></label> <input type="hidden" id="hi" /> <br>
					<small>类别:</small><label id="books-btype"></label><br>
					<small>出版日期：</small> <label id="books-publishTime"></label> <br>
					<small>页数：</small> <label id="books-page"></label> <br>
					<small>主题词：</small> <label id="books-themeWords"></label> <br>
					<small>难度系数：</small> <label id="books-diffcult"></label> <br>
					<small>简介：</small>
					<div id="books-content">
						<small>让经典无限延伸......</small>
					</div>
				</div>
				<form class="form-inline product-form col-md-12" role="form">

					<div class="col-md-12 form-space">

						<button id="btn-collect" type="button" class="btn btn-default">
						<span class="fa fa-heart-o"></span> 加入收藏
					</button>

						<a id="btn-title" class="btn btn-default go-cart" href=""> <span class="fa fa-cart-plus"></span> 试题小练
						</a><br>
						<form >
							评论：<br />
							<!--clos指每行可以显示60个字符 rows指行数-->
							<textarea id="form-comment" cols="60" rows="5" placeholder="请文明用语。" style="resize: none;" name="comment"></textarea>
							<!--textarea指可以创建多行文本-->
							<br />
							<br />
							<!-- input指表单控件，type指向的是控件类型，例如下行中submit（中文意思为顺从）指提交按钮控件 value（中文意思为价值价格重要性）指控件上显示的名字-->
							<input type="button" value="提交"  class="btn btn-default" id="comment" />
						</form>
					
					</div>
				</form>

			</div>
				
		</div>

		<!--页脚开始-->
		<div class="clearfix"></div>
		<footer class="footer">
			<!-- 品质保障，私人定制等-->
			<div class="text-center rights container">
				<div class="col-md-offset-2 col-md-2">
					<span class="fa fa-thumbs-o-up"></span>
					<h4>品质保障</h4>
				</div>
				<div class="col-md-2">
					<span class="fa fa-address-card-o"></span>

					<h4>私人订制</h4>
				</div>
				<div class="col-md-2">
					<span class="fa fa-graduation-cap"></span>
					<h4>学生特供</h4>
				</div>
				<div class="col-md-2">
					<span class="fa fa-bitcoin"></span>

					<h4>专属特权</h4>
				</div>
			</div>
			<!--联系我们、下载客户端等-->
			<div class="container beforeBottom">
				<div class="col-md-offset-1 col-md-3">
					<div><img src="../static/asserts/img/favicons/logo.png" class="footLogo" th:src="@{/asserts/img/favicons/logo.png}"/></div>
					<div><img src="../static/asserts/img/favicons/footerFont.png" th:src="@{/asserts/img/favicons/footerFont.png}"/></div>

				</div>
				<div class="col-md-4 callus text-center">
					<div class="col-md-4">

					</div>
					<div class="col-md-4">

					</div>
					<div class="col-md-4">
						<ul>
							<li><a href="#"><h5>关于我们</h5></a></li>
							<li><a href="#">联系我们</a></li>
							<li>
								<span class="fa fa-wechat"></span>
								<span class="fa fa-weibo"></span>
							</li>
						</ul>
					</div>
				</div>
				<div class="col-md-4">
					<div class="col-md-5">
						<p>智能图书</p>
						<img src="../static/asserts/img/favicons/ios.png" class="lf"th:src="@{/asserts/img/favicons/ios.png}" style="width: 134px;height: 42px">
						<img src="../static/asserts/img/favicons/android.png" alt="" th:src="@{/asserts/img/favicons/android.png}" style="width: 134px;height: 42px"/>
					</div>
					<div class="col-md-6">
						<img src="../static/asserts/img/favicons/mywechat.png" th:src="@{/asserts/img/favicons/mywechat.png}" style="width: 140px;height: 140px">
					</div>
				</div>
			</div>
			<!-- 页面底部-备案号 #footer -->
			<div class="col-md-12 text-center bottom">
				Copyright © 2018 Tedu.cn All Rights Reserved 京ICP备08000853号-56 <a target="_blank" style="font-size: 12px" href="http://www.baidu.com/">智能时代科技集团有限公司</a> 版权所有
			</div>

		</footer>
		<!--页脚结束-->
		<script type="text/javascript">
		
		$(document).ready($("#comment").click(function(){
			$.ajax({
				"url":"/addComment",
				"data": "bid=" + id +"&"+  $("#form-comment").serialize(),
				"type":"POST",
				"dataType":"json",
				"success":function(json) {
					console.log(json)
					if(json.state == 200) {
						alert("评论成功！");
						window.location.href = "comment.html?id=" + id;
					} else {
						alert(json.message);
					}
				}
			});
		}));
			
		var id = location.search.split("?")[1].split("=")[1];
        var btype ;
			$(document).ready(		
				function() {
					console.log("id=" + id);
					$.ajax({
						"url": "/" + id + "/details",
						"type": "GET",
						"dataType": "json",
						"success": function(json) {
							if(json.state == 200) {
								// 将服务器响应的数据显示到页面中
								$("#books-title").html(json.data.title);
								$("#books-btype").html(json.data.btype);
								$("#books-writer").html(json.data.writer);
								$("#books-content").html(json.data.content);
								$("#books-diffcult").html(json.data.diffcult);
								$("#books-publishTime").html(
									json.data.publishTime);
								$("#books-page").html(json.data.page);
								btype = json.data.btype;
								$("#books-themeWords").html(
									json.data.themeWords);

								$("#books-image-1-big")
									.attr(
										"src",
										".." + json.data.image
										);
								
								document.getElementById("btn-title").href = "question.html?id=" + id;

							} else {
								alert(json.message);
							}
						}
					});
				}

			)

			$("#btn-collect").click(function() {
				$.ajax({
					"url": "/collect_book",
					"data": "bid=" + id + "&btype=" + btype,
					"type": "POST",
					"dataType": "json",
					"success": function(json) {
						if(json.state == 200) {
							alert("添加成功！");
						} else {
							alert(json.message);
						}
					},
					"error": function() {
						alert("收藏失败！");
						// location.href = "book.html";
					}
				});
			});
				
			
			$("#btn-search").click(function() {
				var result = document.getElementByName("search")
				location.href = "search.html" + encodeURI(result);			
			});
		</script>

		<script type="text/javascript">
			function add() {
				var pri = document.getElementById("hi");
				var count = document.getElementById("num");
				var gp = document.getElementById("books-price");

				var sum = parseInt(pri.value) * parseInt(count.value) +
					parseInt(pri.value);

				gp.innerText = sum;
			}
		</script>
		<script type="text/javascript">
			function dec() {
				var pri = document.getElementById("hi");
				var count = document.getElementById("num");
				var gp = document.getElementById("books-price");

				if(count.value > 1) {
					var sum = parseInt(pri.value) * parseInt(count.value) -
						parseInt(pri.value);
					gp.innerText = sum;
				}
			}
		</script>
	</body>

</html>